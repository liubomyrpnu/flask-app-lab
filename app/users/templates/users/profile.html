{% extends 'base.html' %}
{% block content %}
<div class='d-flex justify-content-between align-items-center mb-3'>
  <h2>Профіль  {{ user }}</h2>
  <div>
    <a href='{{ url_for('users.logout') }}' class='btn btn-outline-secondary'>Вийти</a>
  </div>
</div>

<!-- Theme buttons -->
<div class='mb-3'>
  <a href='{{ url_for('users.theme', mode='light') }}' class='btn btn-light me-1'>Світла</a>
  <a href='{{ url_for('users.theme', mode='dark') }}' class='btn btn-dark text-white'>Темна</a>
</div>

<!-- Cookie management -->
<div class='row'>
  <div class='col-md-6'>
    <h4>Додати cookie</h4>
    <form method='post'>
      <input type='hidden' name='action' value='add_cookie'>
      <div class='mb-2'>
        <input class='form-control' name='cookie_key' placeholder='Ключ (name)'>
      </div>
      <div class='mb-2'>
        <input class='form-control' name='cookie_value' placeholder='Значення (value)'>
      </div>
      <div class='mb-2'>
        <input class='form-control' name='cookie_max_age' placeholder='Термін життя в секундах (необовʼязково)'>
      </div>
      <button class='btn btn-success' type='submit'>Додати cookie</button>
    </form>
  </div>

  <div class='col-md-6'>
    <h4>Видалити cookie за ключем</h4>
    <form method='post'>
      <input type='hidden' name='action' value='delete_cookie'>
      <div class='mb-2'>
        <input class='form-control' name='cookie_key_delete' placeholder='Ключ для видалення'>
      </div>
      <button class='btn btn-warning' type='submit'>Видалити</button>
    </form>

    <h4 class='mt-3'>Або видалити всі cookie</h4>
    <form method='post'>
      <input type='hidden' name='action' value='clear_all_cookies'>
      <button class='btn btn-danger' type='submit'>Видалити всі</button>
    </form>
  </div>
</div>

<!-- Table of current cookies -->
<div class='mt-4'>
  <h4>Поточні cookies</h4>
  <table class='table table-sm'>
    <thead><tr><th>Ключ</th><th>Значення</th></tr></thead>
    <tbody>
      {% for k, v in cookies.items() %}
      <tr><td>{{ k }}</td><td>{{ v }}</td></tr>
      {% else %}
      <tr><td colspan='2'>Cookies відсутні</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Apply theme inline: example -->
{% if theme == 'dark' %}
<style>
  body { background: #121212; color: #eaeaea; }
  .navbar, .bg-light { background: #1f1f1f!important; color: #eaeaea; }
  .table { color: #eaeaea; }
</style>
{% endif %}

{% endblock %}
